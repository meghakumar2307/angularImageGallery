{"ast":null,"code":"import { HttpEventType, HttpResponse } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/file-upload.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\n\nfunction ImageUploadComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.message, \" \");\n  }\n}\n\nfunction ImageUploadComponent_ul_43_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ul\", 18)(1, \"li\", 19)(2, \"a\", 20);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const file_r2 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"href\", file_r2.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(file_r2.name);\n  }\n}\n\nconst _c0 = function () {\n  return [\"/gallery\"];\n};\n\nexport class ImageUploadComponent {\n  constructor(uploadService) {\n    this.uploadService = uploadService;\n    this.progress = 0;\n    this.message = '';\n    this.formData = {\n      title: '',\n      tags: '',\n      fileSource: '',\n      description: ''\n    };\n  }\n\n  ngOnInit() {\n    this.fileInfos = this.uploadService.getFiles();\n    console.log(this.fileInfos);\n  }\n\n  selectFile(event) {\n    this.selectedFiles = event.target.files;\n  }\n\n  upload() {\n    this.progress = 0;\n\n    if (this.selectedFiles) {\n      const file = this.selectedFiles.item(0);\n\n      if (file) {\n        this.currentFile = file;\n        this.uploadService.upload(this.currentFile).subscribe(event => {\n          if (event.type === HttpEventType.UploadProgress) {\n            this.progress = Math.round(100 * event.loaded / event.total);\n          } else if (event instanceof HttpResponse) {\n            this.message = event.body.message;\n            this.fileInfos = this.uploadService.getFiles();\n            console.log(this.fileInfos);\n          }\n        }, err => {\n          console.log(err);\n          this.progress = 0;\n\n          if (err.error && err.error.message) {\n            this.message = err.error.message;\n          } else {\n            this.message = 'Could not upload the file!';\n          }\n\n          this.currentFile = undefined;\n        });\n      }\n\n      this.selectedFiles = undefined;\n    }\n  }\n\n}\n\nImageUploadComponent.ɵfac = function ImageUploadComponent_Factory(t) {\n  return new (t || ImageUploadComponent)(i0.ɵɵdirectiveInject(i1.FileUploadService));\n};\n\nImageUploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ImageUploadComponent,\n  selectors: [[\"app-image-upload\"]],\n  decls: 45,\n  vars: 10,\n  consts: [[1, \"container\"], [1, \"row\"], [1, \"col-sm-12\", \"btn\", \"btn-primary\"], [1, \"row\", \"justify-content-md-center\", \"m-3\"], [1, \"col-md-2\"], [\"lass\", \"btn btn-default p-0\"], [1, \"btn\", \"btn-default\", \"p-0\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", \"accept\", \"image/*\", 3, \"change\"], [1, \"col-md-1\"], [1, \"btn\", \"btn-success\", \"btn-sm\", \"float-right\", 3, \"disabled\", \"click\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", \"float-right\", 3, \"routerLink\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"card\", \"mt-3\"], [1, \"card-header\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [3, \"href\"]],\n  template: function ImageUploadComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\n      i0.ɵɵtext(3, \" New Image Upload \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"label\", 5);\n      i0.ɵɵtext(7, \" Image Title \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 4)(9, \"label\", 6)(10, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ImageUploadComponent_Template_input_ngModelChange_10_listener($event) {\n        return ctx.formData.title = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(11, \"div\", 3)(12, \"div\", 4)(13, \"label\", 5);\n      i0.ɵɵtext(14, \" Image Tags \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(15, \"div\", 4)(16, \"label\", 6)(17, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ImageUploadComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.formData.tags = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(18, \"div\", 3)(19, \"div\", 4)(20, \"label\", 5);\n      i0.ɵɵtext(21, \" Image description \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"div\", 4)(23, \"label\", 6)(24, \"textarea\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function ImageUploadComponent_Template_textarea_ngModelChange_24_listener($event) {\n        return ctx.formData.description = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(25, \"div\", 3)(26, \"div\", 4)(27, \"label\", 6);\n      i0.ɵɵtext(28, \" Select Image \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(29, \"div\", 4)(30, \"label\", 6)(31, \"input\", 9);\n      i0.ɵɵlistener(\"change\", function ImageUploadComponent_Template_input_change_31_listener($event) {\n        return ctx.selectFile($event);\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(32, \"div\", 3)(33, \"div\", 10)(34, \"button\", 11);\n      i0.ɵɵlistener(\"click\", function ImageUploadComponent_Template_button_click_34_listener() {\n        return ctx.upload();\n      });\n      i0.ɵɵtext(35, \" Upload \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(36, \"div\", 4)(37, \"button\", 12);\n      i0.ɵɵtext(38, \" Gallery View \");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(39, ImageUploadComponent_div_39_Template, 2, 1, \"div\", 13);\n      i0.ɵɵelementStart(40, \"div\", 14)(41, \"div\", 15);\n      i0.ɵɵtext(42, \"List of Files\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(43, ImageUploadComponent_ul_43_Template, 4, 2, \"ul\", 16);\n      i0.ɵɵpipe(44, \"async\");\n      i0.ɵɵelementEnd()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.formData.title);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.formData.tags);\n      i0.ɵɵadvance(7);\n      i0.ɵɵproperty(\"ngModel\", ctx.formData.description);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(9, _c0));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.message);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(44, 7, ctx.fileInfos));\n    }\n  },\n  directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.RouterLink, i4.NgIf, i4.NgForOf],\n  pipes: [i4.AsyncPipe],\n  styles: [\".preview[_ngcontent-%COMP%] {\\r\\n  max-width: 200px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLXVwbG9hZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0FBQ2xCIiwiZmlsZSI6ImltYWdlLXVwbG9hZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByZXZpZXcge1xyXG4gIG1heC13aWR0aDogMjAwcHg7XHJcbn0iXX0= */\"]\n});","map":{"version":3,"sources":["D:/angularImageGallery/src/app/components/image-upload/image-upload.component.ts"],"names":["HttpEventType","HttpResponse","i0","i1","i2","i3","i4","ImageUploadComponent_div_39_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ctx_r0","ɵɵnextContext","ɵɵadvance","ɵɵtextInterpolate1","message","ImageUploadComponent_ul_43_Template","file_r2","$implicit","ɵɵpropertyInterpolate","url","ɵɵsanitizeUrl","ɵɵtextInterpolate","name","_c0","ImageUploadComponent","constructor","uploadService","progress","formData","title","tags","fileSource","description","ngOnInit","fileInfos","getFiles","console","log","selectFile","event","selectedFiles","target","files","upload","file","item","currentFile","subscribe","type","UploadProgress","Math","round","loaded","total","body","err","error","undefined","ɵfac","ImageUploadComponent_Factory","t","ɵɵdirectiveInject","FileUploadService","ɵcmp","ɵɵdefineComponent","selectors","decls","vars","consts","template","ImageUploadComponent_Template","ɵɵlistener","ImageUploadComponent_Template_input_ngModelChange_10_listener","$event","ImageUploadComponent_Template_input_ngModelChange_17_listener","ImageUploadComponent_Template_textarea_ngModelChange_24_listener","ImageUploadComponent_Template_input_change_31_listener","ImageUploadComponent_Template_button_click_34_listener","ɵɵtemplate","ɵɵpipe","ɵɵproperty","ɵɵpureFunction0","ɵɵpipeBind1","directives","DefaultValueAccessor","NgControlStatus","NgModel","RouterLink","NgIf","NgForOf","pipes","AsyncPipe","styles"],"mappings":"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","sourcesContent":["import { HttpEventType, HttpResponse } from '@angular/common/http';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../../services/file-upload.service\";\r\nimport * as i2 from \"@angular/forms\";\r\nimport * as i3 from \"@angular/router\";\r\nimport * as i4 from \"@angular/common\";\r\nfunction ImageUploadComponent_div_39_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 17);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r0 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.message, \" \");\r\n} }\r\nfunction ImageUploadComponent_ul_43_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"ul\", 18)(1, \"li\", 19)(2, \"a\", 20);\r\n    i0.ɵɵtext(3);\r\n    i0.ɵɵelementEnd()()();\r\n} if (rf & 2) {\r\n    const file_r2 = ctx.$implicit;\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵpropertyInterpolate(\"href\", file_r2.url, i0.ɵɵsanitizeUrl);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(file_r2.name);\r\n} }\r\nconst _c0 = function () { return [\"/gallery\"]; };\r\nexport class ImageUploadComponent {\r\n    constructor(uploadService) {\r\n        this.uploadService = uploadService;\r\n        this.progress = 0;\r\n        this.message = '';\r\n        this.formData = {\r\n            title: '',\r\n            tags: '',\r\n            fileSource: '',\r\n            description: ''\r\n        };\r\n    }\r\n    ngOnInit() {\r\n        this.fileInfos = this.uploadService.getFiles();\r\n        console.log(this.fileInfos);\r\n    }\r\n    selectFile(event) {\r\n        this.selectedFiles = event.target.files;\r\n    }\r\n    upload() {\r\n        this.progress = 0;\r\n        if (this.selectedFiles) {\r\n            const file = this.selectedFiles.item(0);\r\n            if (file) {\r\n                this.currentFile = file;\r\n                this.uploadService.upload(this.currentFile).subscribe((event) => {\r\n                    if (event.type === HttpEventType.UploadProgress) {\r\n                        this.progress = Math.round(100 * event.loaded / event.total);\r\n                    }\r\n                    else if (event instanceof HttpResponse) {\r\n                        this.message = event.body.message;\r\n                        this.fileInfos = this.uploadService.getFiles();\r\n                        console.log(this.fileInfos);\r\n                    }\r\n                }, (err) => {\r\n                    console.log(err);\r\n                    this.progress = 0;\r\n                    if (err.error && err.error.message) {\r\n                        this.message = err.error.message;\r\n                    }\r\n                    else {\r\n                        this.message = 'Could not upload the file!';\r\n                    }\r\n                    this.currentFile = undefined;\r\n                });\r\n            }\r\n            this.selectedFiles = undefined;\r\n        }\r\n    }\r\n}\r\nImageUploadComponent.ɵfac = function ImageUploadComponent_Factory(t) { return new (t || ImageUploadComponent)(i0.ɵɵdirectiveInject(i1.FileUploadService)); };\r\nImageUploadComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: ImageUploadComponent, selectors: [[\"app-image-upload\"]], decls: 45, vars: 10, consts: [[1, \"container\"], [1, \"row\"], [1, \"col-sm-12\", \"btn\", \"btn-primary\"], [1, \"row\", \"justify-content-md-center\", \"m-3\"], [1, \"col-md-2\"], [\"lass\", \"btn btn-default p-0\"], [1, \"btn\", \"btn-default\", \"p-0\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [3, \"ngModel\", \"ngModelChange\"], [\"type\", \"file\", \"accept\", \"image/*\", 3, \"change\"], [1, \"col-md-1\"], [1, \"btn\", \"btn-success\", \"btn-sm\", \"float-right\", 3, \"disabled\", \"click\"], [1, \"btn\", \"btn-primary\", \"btn-sm\", \"float-right\", 3, \"routerLink\"], [\"class\", \"alert alert-secondary\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"card\", \"mt-3\"], [1, \"card-header\"], [\"class\", \"list-group list-group-flush\", 4, \"ngFor\", \"ngForOf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-secondary\"], [1, \"list-group\", \"list-group-flush\"], [1, \"list-group-item\"], [3, \"href\"]], template: function ImageUploadComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2);\r\n        i0.ɵɵtext(3, \" New Image Upload \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"div\", 4)(6, \"label\", 5);\r\n        i0.ɵɵtext(7, \" Image Title \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(8, \"div\", 4)(9, \"label\", 6)(10, \"input\", 7);\r\n        i0.ɵɵlistener(\"ngModelChange\", function ImageUploadComponent_Template_input_ngModelChange_10_listener($event) { return ctx.formData.title = $event; });\r\n        i0.ɵɵelementEnd()()()();\r\n        i0.ɵɵelementStart(11, \"div\", 3)(12, \"div\", 4)(13, \"label\", 5);\r\n        i0.ɵɵtext(14, \" Image Tags \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(15, \"div\", 4)(16, \"label\", 6)(17, \"input\", 7);\r\n        i0.ɵɵlistener(\"ngModelChange\", function ImageUploadComponent_Template_input_ngModelChange_17_listener($event) { return ctx.formData.tags = $event; });\r\n        i0.ɵɵelementEnd()()()();\r\n        i0.ɵɵelementStart(18, \"div\", 3)(19, \"div\", 4)(20, \"label\", 5);\r\n        i0.ɵɵtext(21, \" Image description \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(22, \"div\", 4)(23, \"label\", 6)(24, \"textarea\", 8);\r\n        i0.ɵɵlistener(\"ngModelChange\", function ImageUploadComponent_Template_textarea_ngModelChange_24_listener($event) { return ctx.formData.description = $event; });\r\n        i0.ɵɵelementEnd()()()();\r\n        i0.ɵɵelementStart(25, \"div\", 3)(26, \"div\", 4)(27, \"label\", 6);\r\n        i0.ɵɵtext(28, \" Select Image \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(29, \"div\", 4)(30, \"label\", 6)(31, \"input\", 9);\r\n        i0.ɵɵlistener(\"change\", function ImageUploadComponent_Template_input_change_31_listener($event) { return ctx.selectFile($event); });\r\n        i0.ɵɵelementEnd()()()();\r\n        i0.ɵɵelementStart(32, \"div\", 3)(33, \"div\", 10)(34, \"button\", 11);\r\n        i0.ɵɵlistener(\"click\", function ImageUploadComponent_Template_button_click_34_listener() { return ctx.upload(); });\r\n        i0.ɵɵtext(35, \" Upload \");\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(36, \"div\", 4)(37, \"button\", 12);\r\n        i0.ɵɵtext(38, \" Gallery View \");\r\n        i0.ɵɵelementEnd()()();\r\n        i0.ɵɵtemplate(39, ImageUploadComponent_div_39_Template, 2, 1, \"div\", 13);\r\n        i0.ɵɵelementStart(40, \"div\", 14)(41, \"div\", 15);\r\n        i0.ɵɵtext(42, \"List of Files\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(43, ImageUploadComponent_ul_43_Template, 4, 2, \"ul\", 16);\r\n        i0.ɵɵpipe(44, \"async\");\r\n        i0.ɵɵelementEnd()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(10);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.formData.title);\r\n        i0.ɵɵadvance(7);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.formData.tags);\r\n        i0.ɵɵadvance(7);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.formData.description);\r\n        i0.ɵɵadvance(10);\r\n        i0.ɵɵproperty(\"disabled\", !ctx.selectedFiles);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(9, _c0));\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.message);\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(44, 7, ctx.fileInfos));\r\n    } }, directives: [i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel, i3.RouterLink, i4.NgIf, i4.NgForOf], pipes: [i4.AsyncPipe], styles: [\".preview[_ngcontent-%COMP%] {\\r\\n  max-width: 200px;\\r\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLXVwbG9hZC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0UsZ0JBQWdCO0FBQ2xCIiwiZmlsZSI6ImltYWdlLXVwbG9hZC5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnByZXZpZXcge1xyXG4gIG1heC13aWR0aDogMjAwcHg7XHJcbn0iXX0= */\"] });\r\n"]},"metadata":{},"sourceType":"module"}